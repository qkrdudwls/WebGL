<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Computer Graphics Assignment 3</title>
        <script id="vertex-shader" type="x-shader/x-vertex">
            attribute vec4 vPosition;
            attribute vec3 vNormal;

            uniform mat4 modelViewMatrix;
            uniform mat4 projectionMatrix;
            uniform mat3 normalMatrix;
            uniform vec4 lightPosition;

            varying vec3 fNormal;
            varying vec3 fLightDirection;
            varying vec3 fViewDirection;

            void main() {
                vec3 transformedNormal = normalize(normalMatrix * vNormal);
                vec4 transformedPosition = modelViewMatrix * vPosition;

                fNormal = transformedNormal;
                fLightDirection = normalize(lightPosition.xyz - transformedPosition.xyz);
                fViewDirection = normalize(-transformedPosition.xyz);

                gl_Position = projectionMatrix * transformedPosition;
            }
        </script>
        <script id="fragment-shader" type="x-shader/x-fragment">
            precision mediump float;

            varying vec3 fNormal;
            varying vec3 fLightDirection;
            varying vec3 fViewDirection;

            uniform vec4 lightAmbient;
            uniform vec4 lightDiffuse;
            uniform vec4 lightSpecular;
            uniform vec4 materialAmbient;
            uniform vec4 materialDiffuse;
            uniform vec4 materialSpecular;
            uniform float shininess;

            void main() {
                vec3 normal = normalize(fNormal);
                vec3 lightDir = normalize(fLightDirection);
                vec3 viewDir = normalize(fViewDirection);

                // Ambient
                vec4 ambient = lightAmbient * materialAmbient;

                // Diffuse
                float diff = max(dot(normal, lightDir), 0.0);
                vec4 diffuse = diff * lightDiffuse * materialDiffuse;

                // Specular
                vec3 halfVector = normalize(lightDir + viewDir);
                float spec = pow(max(dot(normal, halfVector), 0.0), shininess);
                vec4 specular = spec * lightSpecular * materialSpecular;

                gl_FragColor = ambient + diffuse + specular;
            }
        </script>
        <script src="webgl-utils.js"></script>
        <script src="initShaders.js"></script>
        <script src="MV.js"></script>
        <script src="script.js"></script>
    </head>
    <body>
        <canvas id="glCanvas" width="500" height="500"></canvas>
        <div>
            <input id="FrontButton" type="button" value="Front View" onclick="setCameraView('front')">
            <input id="SideButton" type="button" value="Side View" onclick="setCameraView('side')">
            <input id="TopButton" type="button" value="Top View" onclick="setCameraView('top')">   
        </div>
    </body>
</html>